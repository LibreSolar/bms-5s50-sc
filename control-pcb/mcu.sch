EESchema Schematic File Version 4
LIBS:BMS-5s-cache
EELAYER 26 0
EELAYER END
$Descr A4 11693 8268
encoding utf-8
Sheet 5 6
Title "Libre Solar BMS 5s"
Date "2017-05-27"
Rev "0.1"
Comp "Libre Solar (http://libre.solar)"
Comment1 "License: CC-BY-SA"
Comment2 "Author: Martin Jäger"
Comment3 ""
Comment4 ""
$EndDescr
$Comp
L Project:LM4040 D17
U 1 1 58A66599
P 7500 5400
F 0 "D17" H 7575 5450 50  0000 L CNN
F 1 "LM4040CYM3-2.5" H 7575 5350 50  0000 L CNN
F 2 "LibreSolar:SOT-23" H 7500 5400 60  0001 C CNN
F 3 "" H 7500 5400 60  0001 C CNN
F 4 "Microchip" H 200 -50 50  0001 C CNN "Manufacturer"
F 5 "LM4040DYM3-2.5-TR" H 200 -50 50  0001 C CNN "PartNumber"
	1    7500 5400
	1    0    0    -1  
$EndComp
$Comp
L power:+3.3V #PWR050
U 1 1 58A8CE31
P 7500 2200
F 0 "#PWR050" H 7500 2050 50  0001 C CNN
F 1 "+3.3V" H 7500 2340 50  0000 C CNN
F 2 "" H 7500 2200 50  0000 C CNN
F 3 "" H 7500 2200 50  0000 C CNN
	1    7500 2200
	1    0    0    -1  
$EndComp
$Comp
L power:+3.3V #PWR051
U 1 1 58A8D04B
P 8500 1925
F 0 "#PWR051" H 8500 1775 50  0001 C CNN
F 1 "+3.3V" H 8500 2065 50  0000 C CNN
F 2 "" H 8500 1925 50  0000 C CNN
F 3 "" H 8500 1925 50  0000 C CNN
	1    8500 1925
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR052
U 1 1 58A8D5E6
P 5100 4700
F 0 "#PWR052" H 5100 4450 50  0001 C CNN
F 1 "GND" H 5100 4550 50  0000 C CNN
F 2 "" H 5100 4700 50  0000 C CNN
F 3 "" H 5100 4700 50  0000 C CNN
	1    5100 4700
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR053
U 1 1 58A8D6E3
P 5450 4700
F 0 "#PWR053" H 5450 4450 50  0001 C CNN
F 1 "GND" H 5450 4550 50  0000 C CNN
F 2 "" H 5450 4700 50  0000 C CNN
F 3 "" H 5450 4700 50  0000 C CNN
	1    5450 4700
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR054
U 1 1 58A8D77B
P 5800 4700
F 0 "#PWR054" H 5800 4450 50  0001 C CNN
F 1 "GND" H 5800 4550 50  0000 C CNN
F 2 "" H 5800 4700 50  0000 C CNN
F 3 "" H 5800 4700 50  0000 C CNN
	1    5800 4700
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR055
U 1 1 58A8D813
P 6150 4700
F 0 "#PWR055" H 6150 4450 50  0001 C CNN
F 1 "GND" H 6150 4550 50  0000 C CNN
F 2 "" H 6150 4700 50  0000 C CNN
F 3 "" H 6150 4700 50  0000 C CNN
	1    6150 4700
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR056
U 1 1 58A8D8AB
P 1450 2100
F 0 "#PWR056" H 1450 1850 50  0001 C CNN
F 1 "GND" H 1450 1950 50  0000 C CNN
F 2 "" H 1450 2100 50  0000 C CNN
F 3 "" H 1450 2100 50  0000 C CNN
	1    1450 2100
	1    0    0    -1  
$EndComp
$Comp
L power:+3.3V #PWR057
U 1 1 58A8DF29
P 5100 4300
F 0 "#PWR057" H 5100 4150 50  0001 C CNN
F 1 "+3.3V" H 5100 4440 50  0000 C CNN
F 2 "" H 5100 4300 50  0000 C CNN
F 3 "" H 5100 4300 50  0000 C CNN
	1    5100 4300
	1    0    0    -1  
$EndComp
$Comp
L power:+3.3V #PWR058
U 1 1 58A8E026
P 5450 4300
F 0 "#PWR058" H 5450 4150 50  0001 C CNN
F 1 "+3.3V" H 5450 4440 50  0000 C CNN
F 2 "" H 5450 4300 50  0000 C CNN
F 3 "" H 5450 4300 50  0000 C CNN
	1    5450 4300
	1    0    0    -1  
$EndComp
$Comp
L power:+3.3V #PWR059
U 1 1 58A8E0BE
P 5800 4300
F 0 "#PWR059" H 5800 4150 50  0001 C CNN
F 1 "+3.3V" H 5800 4440 50  0000 C CNN
F 2 "" H 5800 4300 50  0000 C CNN
F 3 "" H 5800 4300 50  0000 C CNN
	1    5800 4300
	1    0    0    -1  
$EndComp
$Comp
L power:+3.3V #PWR060
U 1 1 58A8E156
P 6150 4300
F 0 "#PWR060" H 6150 4150 50  0001 C CNN
F 1 "+3.3V" H 6150 4440 50  0000 C CNN
F 2 "" H 6150 4300 50  0000 C CNN
F 3 "" H 6150 4300 50  0000 C CNN
	1    6150 4300
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR061
U 1 1 58A8F194
P 2100 4900
F 0 "#PWR061" H 2100 4650 50  0001 C CNN
F 1 "GND" H 2100 4750 50  0000 C CNN
F 2 "" H 2100 4900 50  0000 C CNN
F 3 "" H 2100 4900 50  0000 C CNN
	1    2100 4900
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR062
U 1 1 58A8F584
P 5250 2100
F 0 "#PWR062" H 5250 1850 50  0001 C CNN
F 1 "GND" H 5250 1950 50  0000 C CNN
F 2 "" H 5250 2100 50  0000 C CNN
F 3 "" H 5250 2100 50  0000 C CNN
	1    5250 2100
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR063
U 1 1 58A910CE
P 7500 5600
F 0 "#PWR063" H 7500 5350 50  0001 C CNN
F 1 "GND" H 7500 5450 50  0000 C CNN
F 2 "" H 7500 5600 50  0000 C CNN
F 3 "" H 7500 5600 50  0000 C CNN
	1    7500 5600
	1    0    0    -1  
$EndComp
$Comp
L power:+3.3V #PWR064
U 1 1 58A91352
P 7500 4800
F 0 "#PWR064" H 7500 4650 50  0001 C CNN
F 1 "+3.3V" H 7500 4940 50  0000 C CNN
F 2 "" H 7500 4800 50  0000 C CNN
F 3 "" H 7500 4800 50  0000 C CNN
	1    7500 4800
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR065
U 1 1 58A918EA
P 10400 5600
F 0 "#PWR065" H 10400 5350 50  0001 C CNN
F 1 "GND" H 10400 5450 50  0000 C CNN
F 2 "" H 10400 5600 50  0000 C CNN
F 3 "" H 10400 5600 50  0000 C CNN
	1    10400 5600
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR066
U 1 1 58A91B30
P 9500 5600
F 0 "#PWR066" H 9500 5350 50  0001 C CNN
F 1 "GND" H 9500 5450 50  0000 C CNN
F 2 "" H 9500 5600 50  0000 C CNN
F 3 "" H 9500 5600 50  0000 C CNN
	1    9500 5600
	1    0    0    -1  
$EndComp
$Comp
L power:+3.3V #PWR067
U 1 1 58A94580
P 1950 2000
F 0 "#PWR067" H 1950 1850 50  0001 C CNN
F 1 "+3.3V" H 1950 2140 50  0000 C CNN
F 2 "" H 1950 2000 50  0000 C CNN
F 3 "" H 1950 2000 50  0000 C CNN
	1    1950 2000
	1    0    0    -1  
$EndComp
$Comp
L power:+3.3V #PWR068
U 1 1 58A94885
P 1000 1600
F 0 "#PWR068" H 1000 1450 50  0001 C CNN
F 1 "+3.3V" H 1000 1740 50  0000 C CNN
F 2 "" H 1000 1600 50  0000 C CNN
F 3 "" H 1000 1600 50  0000 C CNN
	1    1000 1600
	1    0    0    -1  
$EndComp
$Comp
L Project:L L3
U 1 1 58A97504
P 1200 1700
F 0 "L3" H 1200 1770 50  0000 C CNN
F 1 "L" H 1200 1650 50  0000 C CNN
F 2 "LibreSolar:R_0603_1608" H 1100 1670 50  0001 C CNN
F 3 "" H 1200 1770 50  0001 C CNN
F 4 "Murata" H -750 500 50  0001 C CNN "Manufacturer"
F 5 "BLM18AG601SN1D" H -750 500 50  0001 C CNN "PartNumber"
	1    1200 1700
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR069
U 1 1 58AB7879
P 7100 3200
F 0 "#PWR069" H 7100 2950 50  0001 C CNN
F 1 "GND" H 7100 3050 50  0000 C CNN
F 2 "" H 7100 3200 50  0000 C CNN
F 3 "" H 7100 3200 50  0000 C CNN
	1    7100 3200
	1    0    0    -1  
$EndComp
$Comp
L Project:C C31
U 1 1 58AB7F87
P 7100 2900
F 0 "C31" H 7120 2970 50  0000 L CNN
F 1 "100n" H 7120 2830 50  0000 L CNN
F 2 "LibreSolar:C_0603_1608" H 7100 2900 50  0001 C CNN
F 3 "" H 7100 2900 50  0000 C CNN
F 4 "Yageo" H -150 0   50  0001 C CNN "Manufacturer"
F 5 "CC0603KRX7R9BB104" H -150 0   50  0001 C CNN "PartNumber"
	1    7100 2900
	1    0    0    -1  
$EndComp
$Comp
L Project:C C32
U 1 1 58AB8568
P 5100 4500
F 0 "C32" H 5120 4570 50  0000 L CNN
F 1 "100n" H 5120 4430 50  0000 L CNN
F 2 "LibreSolar:C_0603_1608" H 5100 4500 50  0001 C CNN
F 3 "" H 5100 4500 50  0000 C CNN
F 4 "Yageo" H 3700 -1000 50  0001 C CNN "Manufacturer"
F 5 "CC0603KRX7R9BB104" H 3700 -1000 50  0001 C CNN "PartNumber"
	1    5100 4500
	1    0    0    -1  
$EndComp
$Comp
L Project:C C33
U 1 1 58AB8BE5
P 5450 4500
F 0 "C33" H 5470 4570 50  0000 L CNN
F 1 "100n" H 5470 4430 50  0000 L CNN
F 2 "LibreSolar:C_0603_1608" H 5450 4500 50  0001 C CNN
F 3 "" H 5450 4500 50  0000 C CNN
F 4 "Yageo" H 3700 -1000 50  0001 C CNN "Manufacturer"
F 5 "CC0603KRX7R9BB104" H 3700 -1000 50  0001 C CNN "PartNumber"
	1    5450 4500
	1    0    0    -1  
$EndComp
$Comp
L Project:C C34
U 1 1 58AB8D4F
P 5800 4500
F 0 "C34" H 5820 4570 50  0000 L CNN
F 1 "100n" H 5820 4430 50  0000 L CNN
F 2 "LibreSolar:C_0603_1608" H 5800 4500 50  0001 C CNN
F 3 "" H 5800 4500 50  0000 C CNN
F 4 "Yageo" H 3700 -1000 50  0001 C CNN "Manufacturer"
F 5 "CC0603KRX7R9BB104" H 3700 -1000 50  0001 C CNN "PartNumber"
	1    5800 4500
	1    0    0    -1  
$EndComp
$Comp
L Project:C C27
U 1 1 58AB8FDB
P 1450 1900
F 0 "C27" H 1475 1975 50  0000 L CNN
F 1 "100n" H 1475 1825 50  0000 L CNN
F 2 "LibreSolar:C_0603_1608" H 1450 1900 50  0001 C CNN
F 3 "" H 1450 1900 50  0000 C CNN
F 4 "Yageo" H -750 500 50  0001 C CNN "Manufacturer"
F 5 "CC0603KRX7R9BB104" H -750 500 50  0001 C CNN "PartNumber"
	1    1450 1900
	1    0    0    -1  
$EndComp
$Comp
L Project:C C35
U 1 1 58AB9291
P 6150 4500
F 0 "C35" H 6170 4570 50  0000 L CNN
F 1 "4.7u" H 6170 4430 50  0000 L CNN
F 2 "LibreSolar:C_0603_1608" H 6150 4500 50  0001 C CNN
F 3 "" H 6150 4500 50  0000 C CNN
F 4 "Murata" H 3700 -1000 50  0001 C CNN "Manufacturer"
F 5 "GRM188R61A475KE15D" H 3700 -1000 50  0001 C CNN "PartNumber"
F 6 "10V" H 0   0   60  0001 C CNN "Remarks"
	1    6150 4500
	1    0    0    -1  
$EndComp
$Comp
L Project:R R41
U 1 1 58ADF91D
P 9500 4900
F 0 "R41" V 9425 4900 50  0000 C CNN
F 1 "330" V 9575 4900 50  0000 C CNN
F 2 "LibreSolar:R_0603_1608" H 9500 4900 50  0001 C CNN
F 3 "" H 9500 4900 50  0000 C CNN
F 4 "Yageo" H 0   0   50  0001 C CNN "Manufacturer"
F 5 "RC0603FR-07330RL" H 0   0   50  0001 C CNN "PartNumber"
	1    9500 4900
	1    0    0    1   
$EndComp
$Comp
L Project:R R42
U 1 1 58ADFCF1
P 10400 4900
F 0 "R42" V 10330 4900 50  0000 C CNN
F 1 "330" V 10470 4900 50  0000 C CNN
F 2 "LibreSolar:R_0603_1608" H 10400 4900 50  0001 C CNN
F 3 "" H 10400 4900 50  0000 C CNN
F 4 "Yageo" H 100 0   50  0001 C CNN "Manufacturer"
F 5 "RC0603FR-07330RL" H 100 0   50  0001 C CNN "PartNumber"
	1    10400 4900
	1    0    0    1   
$EndComp
$Comp
L Project:D_LED LED2
U 1 1 58AE11BD
P 10400 5300
F 0 "LED2" H 10525 5350 50  0000 L CNN
F 1 "LED" H 10525 5250 50  0000 L CNN
F 2 "LED_THT:LED_D3.0mm" V 10400 5300 50  0001 C CNN
F 3 "" V 10400 5300 50  0000 C CNN
	1    10400 5300
	1    0    0    -1  
$EndComp
$Comp
L Project:R R40
U 1 1 58AE1DE5
P 7500 5000
F 0 "R40" V 7430 5000 50  0000 C CNN
F 1 "10k" V 7570 5000 50  0000 C CNN
F 2 "LibreSolar:R_0603_1608" H 7500 5000 50  0001 C CNN
F 3 "" H 7500 5000 50  0000 C CNN
F 4 "Yageo" H 200 125 50  0001 C CNN "Manufacturer"
F 5 "RC0603FR-0710KL" H 200 125 50  0001 C CNN "PartNumber"
	1    7500 5000
	1    0    0    1   
$EndComp
$Comp
L Project:R R38
U 1 1 58AE2393
P 8500 2500
F 0 "R38" V 8430 2500 50  0000 C CNN
F 1 "2.2k" V 8570 2500 50  0000 C CNN
F 2 "LibreSolar:R_0603_1608" H 8500 2500 50  0001 C CNN
F 3 "" H 8500 2500 50  0000 C CNN
F 4 "Yageo" H -250 -25 50  0001 C CNN "Manufacturer"
F 5 "RC0603FR-072K2L" H -250 -25 50  0001 C CNN "PartNumber"
	1    8500 2500
	1    0    0    1   
$EndComp
$Comp
L Project:R R35
U 1 1 58AE2797
P 8500 2100
F 0 "R35" V 8430 2100 50  0000 C CNN
F 1 "1M" V 8570 2100 50  0000 C CNN
F 2 "LibreSolar:R_0603_1608" H 8500 2100 50  0001 C CNN
F 3 "" H 8500 2100 50  0000 C CNN
F 4 "Yageo" H -250 25  50  0001 C CNN "Manufacturer"
F 5 "RC0603FR-071ML" H -250 25  50  0001 C CNN "PartNumber"
	1    8500 2100
	1    0    0    1   
$EndComp
$Comp
L Project:R R37
U 1 1 58AE2AE1
P 7500 2400
F 0 "R37" V 7430 2400 50  0000 C CNN
F 1 "1M" V 7570 2400 50  0000 C CNN
F 2 "LibreSolar:R_0603_1608" H 7500 2400 50  0001 C CNN
F 3 "" H 7500 2400 50  0000 C CNN
F 4 "Yageo" H -150 275 50  0001 C CNN "Manufacturer"
F 5 "RC0603FR-071ML" H -150 275 50  0001 C CNN "PartNumber"
	1    7500 2400
	1    0    0    1   
$EndComp
$Comp
L power:GND #PWR070
U 1 1 58AE3107
P 7500 3200
F 0 "#PWR070" H 7500 2950 50  0001 C CNN
F 1 "GND" H 7500 3050 50  0000 C CNN
F 2 "" H 7500 3200 50  0000 C CNN
F 3 "" H 7500 3200 50  0000 C CNN
	1    7500 3200
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR071
U 1 1 58AE3C1B
P 8500 3200
F 0 "#PWR071" H 8500 2950 50  0001 C CNN
F 1 "GND" H 8500 3050 50  0000 C CNN
F 2 "" H 8500 3200 50  0000 C CNN
F 3 "" H 8500 3200 50  0000 C CNN
	1    8500 3200
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR072
U 1 1 58AE3CBA
P 9100 3200
F 0 "#PWR072" H 9100 2950 50  0001 C CNN
F 1 "GND" H 9100 3050 50  0000 C CNN
F 2 "" H 9100 3200 50  0000 C CNN
F 3 "" H 9100 3200 50  0000 C CNN
	1    9100 3200
	1    0    0    -1  
$EndComp
$Comp
L Project:R R39
U 1 1 58AE3E3D
P 8000 2900
F 0 "R39" V 7930 2900 50  0000 C CNN
F 1 "52.3k" V 8070 2900 50  0000 C CNN
F 2 "LibreSolar:R_0603_1608" H 8000 2900 50  0001 C CNN
F 3 "" H 8000 2900 50  0000 C CNN
F 4 "Yageo" H -250 -50 50  0001 C CNN "Manufacturer"
F 5 "RC0603FR-0752K3L" H -250 -50 50  0001 C CNN "PartNumber"
	1    8000 2900
	0    -1   1    0   
$EndComp
$Comp
L Project:C C30
U 1 1 58AE661C
P 9100 2700
F 0 "C30" H 9120 2770 50  0000 L CNN
F 1 "4.7u" H 9120 2630 50  0000 L CNN
F 2 "LibreSolar:C_0603_1608" H 9100 2700 50  0001 C CNN
F 3 "" H 9100 2700 50  0000 C CNN
F 4 "Murata" H -250 0   50  0001 C CNN "Manufacturer"
F 5 "GRM188R61A475KE15D" H -250 0   50  0001 C CNN "PartNumber"
F 6 "10V" H 0   0   60  0001 C CNN "Remarks"
	1    9100 2700
	1    0    0    -1  
$EndComp
$Comp
L LibreSolar:STM32F072CB U5
U 1 1 58BDEE38
P 3100 3400
F 0 "U5" H 3100 4950 50  0000 C CNN
F 1 "STM32F072CB" H 3100 1850 50  0000 C CNN
F 2 "Package_QFP:LQFP-48_7x7mm_P0.5mm" H 3200 3100 50  0001 R TNN
F 3 "" H 3100 3400 50  0001 C CNN
F 4 "STMicroelectronics" H -300 250 50  0001 C CNN "Manufacturer"
F 5 "STM32F072CBT6" H -300 250 50  0001 C CNN "PartNumber"
	1    3100 3400
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR073
U 1 1 58C29FC4
P 4000 6600
F 0 "#PWR073" H 4000 6350 50  0001 C CNN
F 1 "GND" H 4000 6450 50  0000 C CNN
F 2 "" H 4000 6600 50  0000 C CNN
F 3 "" H 4000 6600 50  0000 C CNN
	1    4000 6600
	1    0    0    -1  
$EndComp
$Comp
L power:+3.3V #PWR074
U 1 1 58C2A17E
P 4000 6250
F 0 "#PWR074" H 4000 6100 50  0001 C CNN
F 1 "+3.3V" H 4000 6390 50  0000 C CNN
F 2 "" H 4000 6250 50  0000 C CNN
F 3 "" H 4000 6250 50  0000 C CNN
	1    4000 6250
	1    0    0    -1  
$EndComp
$Comp
L Project:SW_PUSH SW2
U 1 1 58C38D27
P 7500 2950
F 0 "SW2" H 7500 2900 50  0000 C CNN
F 1 "SW_PUSH" H 7500 2820 50  0001 C CNN
F 2 "LibreSolar:SW_SPST_EVQP7A" H 7400 2800 50  0001 C CNN
F 3 "" H 7500 2950 50  0000 C CNN
F 4 "Würth" H 7500 2950 60  0001 C CNN "Manufacturer"
F 5 "434121050816" H 7500 2950 60  0001 C CNN "PartNumber"
	1    7500 2950
	0    1    1    0   
$EndComp
$Comp
L power:PWR_FLAG #FLG075
U 1 1 58BFF095
P 1600 1600
F 0 "#FLG075" H 1600 1550 50  0001 C CNN
F 1 "PWR_FLAG" H 1600 1800 50  0000 C CNN
F 2 "" H 1600 1600 50  0000 C CNN
F 3 "" H 1600 1600 50  0000 C CNN
	1    1600 1600
	1    0    0    -1  
$EndComp
$Comp
L LibreSolar:ST_Nucleo_SWD SWD1
U 1 1 58C4B6A9
P 4700 6550
F 0 "SWD1" H 4500 6950 50  0000 L CNN
F 1 "ST_Nucleo_SWD" H 4500 6150 50  0000 L CNN
F 2 "Connector_PinHeader_2.54mm:PinHeader_1x06_P2.54mm_Vertical" H 4700 5950 30  0001 C CIN
F 3 "" H 4850 6600 60  0001 C CNN
	1    4700 6550
	1    0    0    -1  
$EndComp
$Comp
L Project:Conn_01x02 P5
U 1 1 58C4C05C
P 6000 6500
F 0 "P5" H 6000 6650 50  0000 C CNN
F 1 "CONN_01X02" V 6100 6500 50  0000 C CNN
F 2 "Connector_PinHeader_2.54mm:PinHeader_1x02_P2.54mm_Vertical" H 6000 6500 50  0001 C CNN
F 3 "" H 6000 6500 50  0001 C CNN
	1    6000 6500
	1    0    0    -1  
$EndComp
$Comp
L Project:D_LED LED1
U 1 1 58AE0EA3
P 9500 5300
F 0 "LED1" H 9625 5350 50  0000 L CNN
F 1 "LED" H 9625 5250 50  0000 L CNN
F 2 "LED_THT:LED_D3.0mm" V 9500 5300 50  0001 C CNN
F 3 "" V 9500 5300 50  0000 C CNN
	1    9500 5300
	1    0    0    -1  
$EndComp
Text Notes 9400 4400 0    100  ~ 0
Status LEDs
Text Notes 2600 1300 0    100  ~ 0
MCU STM32F072
Text Notes 3900 5900 0    100  ~ 0
STM Nucleo SWD and USART
Text Notes 9600 3300 0    50   ~ 0
Equations:\ntau = R39 * C36 = 2.2 s\nV(t) = Vmax * (1-exp(-t/tau))\n--> t = -tau * ln(1-V/Vmax)\n\nNormal startup:\nBOOT0 < 0.69 V\nPress SW1 < 0.51 s\n\nUSB bootloader:\nBOOT0 > 1.61 V\nPress SW1 > 1.47 s
Text Notes 7800 4900 0    50   ~ 0
min. 65 uA\noperating\ncurrent
Text Notes 7000 4400 0    100  ~ 0
Voltage reference
Text Notes 7650 1300 0    100  ~ 0
MCU reset and boot circuit
Text Label 4250 4100 2    50   ~ 0
LED1
Text Label 4250 4200 2    50   ~ 0
LED2
Text Label 1700 3700 0    50   ~ 0
USART1_TX
Text Label 1700 3800 0    50   ~ 0
USART1_RX
Text Label 1800 4100 0    50   ~ 0
SWDIO
Text Label 1800 4200 0    50   ~ 0
SWCLK
Text HLabel 1700 3400 0    50   Input ~ 0
TEMP_1
Text Label 1800 2700 0    50   ~ 0
BOOT0
Text Label 1800 2600 0    50   ~ 0
OSC_IN
Text Label 4500 2000 2    50   ~ 0
OSC_OUT
Text Label 4500 2400 2    50   ~ 0
~RESET
Text Label 4750 1800 0    50   ~ 0
OSC_IN
Text Label 5900 1800 2    50   ~ 0
OSC_OUT
Text Label 7150 2600 0    50   ~ 0
~RESET
Text Label 4100 6600 0    50   ~ 0
SWDIO
Text Label 4100 6400 0    50   ~ 0
SWCLK
Text Label 5300 6500 0    50   ~ 0
USART1_TX
Text Label 5300 6600 0    50   ~ 0
USART1_RX
Text Label 4100 6700 0    50   ~ 0
~RESET
Text Label 9400 2300 2    50   ~ 0
BOOT0
Text Label 7900 5200 2    50   ~ 0
V_REF
Text Label 9500 4500 3    50   ~ 0
LED1
Text Label 10400 4500 3    50   ~ 0
LED2
Text HLabel 4300 3600 2    50   Output ~ 0
CAN_TX
Text HLabel 4300 3500 2    50   Input ~ 0
CAN_RX
Text HLabel 4300 3400 2    50   BiDi ~ 0
I2C1_SDA
Text HLabel 4300 3300 2    50   Output ~ 0
I2C1_SCL
Text HLabel 4300 3200 2    50   Output ~ 0
SPI1_MOSI
Text HLabel 4300 3100 2    50   Input ~ 0
SPI1_MISO
Text HLabel 4300 3000 2    50   Output ~ 0
SPI1_SCK
Text HLabel 1700 3900 0    50   BiDi ~ 0
USB_DM
Text HLabel 1700 4000 0    50   BiDi ~ 0
USB_DP
Text HLabel 1700 4300 0    50   Output ~ 0
CAN_STB
Text HLabel 1700 3100 0    50   Input ~ 0
USART2_RX
Text HLabel 1700 3000 0    50   Output ~ 0
USART2_TX
Text HLabel 1700 2900 0    50   Output ~ 0
SSEL
NoConn ~ 4400 6800
Wire Wire Line
	2200 2100 1950 2100
Wire Wire Line
	1950 2000 1950 2100
Wire Wire Line
	1950 2200 2200 2200
Wire Wire Line
	1950 2300 2200 2300
Wire Wire Line
	1950 2400 2200 2400
Wire Wire Line
	5450 4300 5450 4400
Wire Wire Line
	5100 4300 5100 4400
Wire Wire Line
	5800 4300 5800 4400
Wire Wire Line
	6150 4400 6150 4300
Wire Wire Line
	8500 1925 8500 2000
Wire Wire Line
	7500 4800 7500 4900
Wire Wire Line
	2200 2700 1800 2700
Wire Wire Line
	8500 2200 8500 2300
Wire Wire Line
	8500 2300 9100 2300
Wire Wire Line
	9100 2300 9100 2600
Wire Wire Line
	4000 3500 4300 3500
Wire Wire Line
	2200 4300 1700 4300
Wire Wire Line
	4000 3600 4300 3600
Wire Wire Line
	5450 4700 5450 4600
Wire Wire Line
	7100 3000 7100 3200
Wire Wire Line
	2200 4600 2100 4600
Wire Wire Line
	2100 4500 2100 4600
Wire Wire Line
	2200 4500 2100 4500
Wire Wire Line
	5100 4700 5100 4600
Wire Wire Line
	5800 4600 5800 4700
Wire Wire Line
	1450 2000 1450 2100
Wire Wire Line
	6150 4600 6150 4700
Wire Wire Line
	8500 3100 8500 3200
Wire Wire Line
	9100 2800 9100 3200
Wire Wire Line
	7500 5500 7500 5600
Wire Wire Line
	4000 3300 4300 3300
Wire Wire Line
	4000 3400 4300 3400
Wire Wire Line
	4000 3700 4300 3700
Wire Wire Line
	4000 3800 4300 3800
Wire Wire Line
	9500 4800 9500 4500
Wire Wire Line
	4000 4100 4250 4100
Wire Wire Line
	10400 4800 10400 4500
Wire Wire Line
	4000 4200 4250 4200
Wire Wire Line
	8100 2900 8200 2900
Wire Wire Line
	8500 2600 8500 2700
Wire Wire Line
	2200 2600 1800 2600
Wire Wire Line
	4000 2000 4500 2000
Wire Wire Line
	2200 3200 1700 3200
Wire Wire Line
	4000 3100 4300 3100
Wire Wire Line
	4000 3200 4300 3200
Wire Wire Line
	4000 3000 4300 3000
Wire Wire Line
	4000 2500 4300 2500
Wire Wire Line
	2200 4200 1800 4200
Wire Wire Line
	2200 4100 1800 4100
Wire Wire Line
	2200 2900 1700 2900
Wire Wire Line
	4000 4000 4300 4000
Wire Wire Line
	2200 3800 1700 3800
Wire Wire Line
	2200 3700 1700 3700
Wire Wire Line
	2200 3100 1700 3100
Wire Wire Line
	2200 3000 1700 3000
Wire Wire Line
	2200 3900 1700 3900
Wire Wire Line
	2200 4000 1700 4000
Wire Wire Line
	2200 3400 1700 3400
Wire Wire Line
	7500 5100 7500 5200
Wire Wire Line
	7500 5200 7900 5200
Wire Wire Line
	2200 3300 1700 3300
Wire Wire Line
	2200 3500 1700 3500
Wire Wire Line
	4000 2900 4300 2900
Wire Wire Line
	4000 2400 4500 2400
Wire Wire Line
	7100 2600 7100 2800
Wire Wire Line
	7100 2600 7500 2600
Wire Wire Line
	4750 1800 5050 1800
Wire Wire Line
	5450 1800 5900 1800
Wire Wire Line
	5300 6500 5800 6500
Wire Wire Line
	5300 6600 5800 6600
Wire Wire Line
	4000 6300 4400 6300
Wire Wire Line
	4000 6250 4000 6300
Wire Wire Line
	7500 3100 7500 3200
Wire Wire Line
	1300 1700 1450 1700
Wire Wire Line
	1450 1700 1450 1800
Wire Wire Line
	2100 1700 2100 2000
Wire Wire Line
	1000 1700 1100 1700
Wire Wire Line
	1000 1700 1000 1600
Wire Wire Line
	7800 2600 7800 2900
Wire Wire Line
	7800 2900 7900 2900
Wire Wire Line
	2200 4700 2100 4700
Wire Wire Line
	2200 4800 2100 4800
Wire Wire Line
	2100 2000 2200 2000
Wire Wire Line
	1600 1600 1600 1700
Wire Wire Line
	4400 6400 4100 6400
Wire Wire Line
	4400 6600 4100 6600
Wire Wire Line
	4400 6700 4100 6700
Wire Wire Line
	4400 6500 4000 6500
Wire Wire Line
	4000 6500 4000 6600
Wire Wire Line
	4000 3900 4300 3900
Connection ~ 1950 2100
Connection ~ 1950 2200
Connection ~ 1950 2300
Connection ~ 8500 2300
Connection ~ 9100 2300
Connection ~ 2100 4700
Connection ~ 2100 4800
Connection ~ 2100 4600
Connection ~ 7500 5200
Connection ~ 7500 2600
Connection ~ 1450 1700
Connection ~ 1600 1700
Wire Wire Line
	10400 5000 10400 5100
Wire Wire Line
	10400 5400 10400 5500
Wire Wire Line
	9500 5400 9500 5500
Wire Wire Line
	9500 5000 9500 5100
Wire Wire Line
	7500 2500 7500 2600
Wire Wire Line
	7500 2300 7500 2200
$Comp
L Project:Resonator Y1
U 1 1 58C556C6
P 5250 1800
F 0 "Y1" H 5250 1950 50  0000 C CNN
F 1 "8kHz" H 5450 1750 50  0000 L CNN
F 2 "LibreSolar:Resonator_Murata_CSTCE_G" H 5250 1800 50  0001 C CNN
F 3 "" H 5250 1800 50  0000 C CNN
F 4 "Murata" H 150 -2550 50  0001 C CNN "Manufacturer"
F 5 "CSTCE8M00G15C99-R0" H 150 -2550 50  0001 C CNN "PartNumber"
F 6 "0.1%" H 5450 1650 50  0000 L CNN "Tolerance"
	1    5250 1800
	1    0    0    -1  
$EndComp
Wire Wire Line
	5250 2000 5250 2100
Text Notes 5450 2250 0    50   ~ 0
Tight tolerance\nfor CAN interface
Wire Wire Line
	2000 6400 1900 6400
Wire Wire Line
	2000 6500 1900 6500
Text Notes 1500 7000 0    50   ~ 0
BQ769x0 ID either 0x08 or 0x18\n24AA01 has 0b1010XXX --> OK
Text Notes 2100 5900 0    100  ~ 0
EEPROM
$Comp
L power:GND #PWR076
U 1 1 58F26CD5
P 3100 6800
F 0 "#PWR076" H 3100 6550 50  0001 C CNN
F 1 "GND" H 3100 6650 50  0000 C CNN
F 2 "" H 3100 6800 50  0000 C CNN
F 3 "" H 3100 6800 50  0000 C CNN
	1    3100 6800
	1    0    0    -1  
$EndComp
$Comp
L power:+3.3V #PWR077
U 1 1 58F26CE1
P 3100 6200
F 0 "#PWR077" H 3100 6050 50  0001 C CNN
F 1 "+3.3V" H 3100 6340 50  0000 C CNN
F 2 "" H 3100 6200 50  0000 C CNN
F 3 "" H 3100 6200 50  0000 C CNN
	1    3100 6200
	1    0    0    -1  
$EndComp
$Comp
L Project:C C36
U 1 1 58F26CED
P 3100 6500
F 0 "C36" H 3125 6600 50  0000 L CNN
F 1 "100n" H 3125 6400 50  0000 L CNN
F 2 "LibreSolar:C_0603_1608" H 3138 6350 50  0001 C CNN
F 3 "" H 3100 6500 50  0000 C CNN
F 4 "Yageo" H 0   0   60  0001 C CNN "Manufacturer"
F 5 "CC0603KRX7R9BB104" H 0   0   60  0001 C CNN "PartNumber"
	1    3100 6500
	1    0    0    -1  
$EndComp
Text HLabel 4300 3700 2    50   Output ~ 0
I2C2_SCL
Text HLabel 4300 3800 2    50   BiDi ~ 0
I2C2_SDA
Text HLabel 1700 3500 0    50   Input ~ 0
TEMP_2
Text Label 4300 2500 2    50   ~ 0
V_REF
NoConn ~ 4000 2100
Text HLabel 1700 3200 0    50   Input ~ 0
V_BAT
Text HLabel 1700 3300 0    50   Input ~ 0
V_LOAD
Text HLabel 4300 2900 2    50   Output ~ 0
PCHG_EN
Text HLabel 4300 3900 2    50   Input ~ 0
ALERT_IN
Text HLabel 4300 4000 2    50   Output ~ 0
TS1_BQ
NoConn ~ 4000 2800
NoConn ~ 4000 2700
Wire Wire Line
	2200 3600 1700 3600
Text HLabel 1700 3600 0    50   Input ~ 0
SW_POWER
NoConn ~ 4000 2200
NoConn ~ 4000 2300
$Comp
L LibreSolar:24AA01 U6
U 1 1 59170C8C
P 2400 6500
F 0 "U6" H 2400 6865 50  0000 C CNN
F 1 "24AA01" H 2400 6774 50  0000 C CNN
F 2 "LibreSolar:SOT-23-5" H -100 -300 50  0001 C CNN
F 3 "" H -100 350 60  0000 C CNN
F 4 "Microchip" H 0   0   60  0001 C CNN "Manufacturer"
F 5 "24AA01T-I/OT" H 0   0   60  0001 C CNN "PartNumber"
	1    2400 6500
	1    0    0    -1  
$EndComp
Wire Wire Line
	2800 6600 2900 6600
Wire Wire Line
	2900 6500 2900 6600
Wire Wire Line
	2900 6700 3100 6700
Wire Wire Line
	3100 6600 3100 6700
Connection ~ 3100 6700
Wire Wire Line
	3100 6200 3100 6300
Wire Wire Line
	2800 6400 2900 6400
Wire Wire Line
	2900 6400 2900 6300
Wire Wire Line
	2900 6300 3100 6300
Connection ~ 3100 6300
Wire Wire Line
	2800 6500 2900 6500
Connection ~ 2900 6600
Text HLabel 1900 6400 0    50   Input ~ 0
I2C2_SCL
Text HLabel 1900 6500 0    50   Input ~ 0
I2C2_SDA
$Comp
L Project:Q_NMOS_GSD Q8
U 1 1 59230085
P 8400 2900
F 0 "Q8" H 8700 2950 50  0000 R CNN
F 1 "BSS138" H 8900 2850 50  0000 R CNN
F 2 "LibreSolar:SOT-23" H 8600 3000 50  0001 C CNN
F 3 "" H 8400 2900 50  0000 C CNN
F 4 "Fairchild Semiconductor" H 8400 2900 60  0001 C CNN "Manufacturer"
F 5 "BSS138" H 8400 2900 60  0001 C CNN "PartNumber"
	1    8400 2900
	1    0    0    -1  
$EndComp
$Comp
L Project:D_LED LED3
U 1 1 5928A74D
P 9100 5300
F 0 "LED3" H 9225 5350 50  0000 L CNN
F 1 "LED" H 9225 5250 50  0000 L CNN
F 2 "LED_SMD:LED_0603_1608Metric" V 9100 5300 50  0001 C CNN
F 3 "" V 9100 5300 50  0000 C CNN
	1    9100 5300
	1    0    0    -1  
$EndComp
$Comp
L Project:D_LED LED4
U 1 1 5928A925
P 10000 5300
F 0 "LED4" H 10125 5350 50  0000 L CNN
F 1 "LED" H 10125 5250 50  0000 L CNN
F 2 "LED_SMD:LED_0603_1608Metric" V 10000 5300 50  0001 C CNN
F 3 "" V 10000 5300 50  0000 C CNN
	1    10000 5300
	1    0    0    -1  
$EndComp
Wire Wire Line
	10400 5100 10000 5100
Wire Wire Line
	10000 5100 10000 5200
Connection ~ 10400 5100
Wire Wire Line
	10000 5400 10000 5500
Wire Wire Line
	10000 5500 10400 5500
Connection ~ 10400 5500
Wire Wire Line
	9500 5100 9100 5100
Wire Wire Line
	9100 5100 9100 5200
Connection ~ 9500 5100
Wire Wire Line
	9100 5400 9100 5500
Wire Wire Line
	9100 5500 9500 5500
Connection ~ 9500 5500
Wire Wire Line
	1950 2100 1950 2200
Wire Wire Line
	1950 2200 1950 2300
Wire Wire Line
	1950 2300 1950 2400
Wire Wire Line
	8500 2300 8500 2400
Wire Wire Line
	9100 2300 9400 2300
Wire Wire Line
	2100 4700 2100 4800
Wire Wire Line
	2100 4800 2100 4900
Wire Wire Line
	2100 4600 2100 4700
Wire Wire Line
	7500 5200 7500 5300
Wire Wire Line
	7500 2600 7800 2600
Wire Wire Line
	7500 2600 7500 2800
Wire Wire Line
	1450 1700 1600 1700
Wire Wire Line
	1600 1700 2100 1700
Wire Wire Line
	3100 6700 3100 6800
Wire Wire Line
	3100 6300 3100 6400
Wire Wire Line
	2900 6600 2900 6700
Wire Wire Line
	10400 5100 10400 5200
Wire Wire Line
	10400 5500 10400 5600
Wire Wire Line
	9500 5100 9500 5200
Wire Wire Line
	9500 5500 9500 5600
$EndSCHEMATC
